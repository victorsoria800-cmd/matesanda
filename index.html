<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Entrenamiento Matem√°tica - Prof. MateSanda</title>
<style>
  :root { --c1:#0d6efd; --bg:#f7f9fc; --card:#ffffff; --ok:#16a34a; --err:#dc2626; }
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif;background:var(--bg);margin:0;color:#111}
  header{background:var(--c1);color:#fff;padding:18px 16px}
  header h1{margin:0;font-size:20px}
  main{max-width:900px;margin:0 auto;padding:16px}
  .card{background:var(--card);border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,.06);padding:16px;margin:12px 0}
  .row{display:flex;flex-wrap:wrap;gap:12px}
  .btn{border:0;border-radius:10px;padding:12px 14px;background:#eef2ff;color:#1e3a8a;cursor:pointer}
  .btn.primary{background:var(--c1);color:#fff}
  .btn.ghost{background:#fff;border:1px solid #e5e7eb;color:#111}
  .chips{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}
  .hidden{display:none}
  .msg{padding:12px 14px;border-radius:10px;margin:10px 0;background:#f1f5f9}
  .ok{color:var(--ok);font-weight:600}
  .err{color:var(--err);font-weight:600}
  .footer{font-size:12px;color:#475569;margin-top:16px}
  input[type=text], input[type=number]{padding:10px;border:1px solid #e5e7eb;border-radius:8px;width:120px}
  .q{margin:10px 0}
</style>
</head>
<body>
<header>
  <h1>Prof. MateSanda ‚Ä¢ Entrenamiento de Matem√°tica para Ingresantes 1 a√±o (Escuela 3117"La Reyes")</h1>
</header>

<main>
  <div class="card" id="bienvenida">
    <h2>¬°Hola! Soy el Prof. MateSanda üëã</h2>
    <p>Te doy la bienvenida al entrenamiento interactivo. Elige un tema para empezar. En cualquier momento puedes volver al men√∫.</p>
    <div class="chips" id="menu"></div>
    <div class="chips" style="margin-top:10px">
      <      <button class="btn ghost" onclick="miniQuiz()">Mini‚ÄëQuiz (5 preguntas)</button>
    </div>
  </div>

  <div id="contenido"></div>

  <div class="footer">
    Consejos: responde solo con n√∫meros cuando se pida. Si te equivocas, ver√°s la correcci√≥n al instante.
  </div>
</main>

<script>
const temas = [
  {
    id:"naturales", titulo:"N√∫meros Naturales",
    exp:"Los n√∫meros naturales sirven para contar: 1, 2, 3, ‚Ä¶ No incluyen decimales ni negativos. El 0 indica ausencia.",
    ejemplo:"Si tengo 5 cuadernos y compro 3 m√°s: 5 + 3 = 8.",
    preguntas:[
      {enunciado:"¬øCu√°l es el siguiente de 49?", tipo:"num", resp:50, explic:"El siguiente es 49 + 1 = 50."},
      {enunciado:"¬øCu√°nto es 27 + 15?", tipo:"num", resp:42, explic:"27 + 15 = 42."},
      {enunciado:"Si ten√≠a 30 caramelos y regal√© 18, ¬øcu√°ntos quedan?", tipo:"num", resp:12, explic:"30 ‚àí 18 = 12."}
    ]
  },
  {
    id:"mult_div", titulo:"M√∫ltiplos y Divisores",
    exp:"Un m√∫ltiplo de un n√∫mero se obtiene al multiplicarlo por 1, 2, 3, ‚Ä¶; un divisor 'cabe exacto' en otro.",
    ejemplo:"¬ø12 es m√∫ltiplo de 6? S√≠, 6√ó2=12. ¬ø4 es divisor de 20? S√≠, 20√∑4=5.",
    preguntas:[
      {enunciado:"Elige los m√∫ltiplos de 5: 10, 12, 25, 28, 35 (responde con n√∫meros separados por coma).", tipo:"texto",
       resp:"10,25,35", valid:(v)=>normList(v)==="10,25,35", explic:"M√∫ltiplos de 5: 10, 15, 20, 25, 30, 35‚Ä¶"},
      {enunciado:"¬øEs 7 divisor de 35? (si/no)", tipo:"texto", resp:"si", valid:(v)=>v.trim().toLowerCase()==="si",
       explic:"35 √∑ 7 = 5, sin resto."},
      {enunciado:"¬øCu√°l es el resto de 29 √∑ 4?", tipo:"num", resp:1, explic:"4√ó7=28, resta 1."}
    ]
  },
  {
    id:"enteros", titulo:"N√∫meros Enteros",
    exp:"Incluyen negativos, cero y positivos: ‚Ä¶ ‚àí3, ‚àí2, ‚àí1, 0, 1, 2, 3, ‚Ä¶",
    ejemplo:"‚àí5 + 9 = 4.",
    preguntas:[
      {enunciado:"Completa: ‚àí3 + (‚àí7) = ?", tipo:"texto", resp:"-10", valid:(v)=>v.replace(/\s/g,'')==='-10', explic:"Sumas negativos: ‚àí3 + ‚àí7 = ‚àí10."},
      {enunciado:"8 ‚àí 12 = ?", tipo:"texto", resp:"-4", valid:(v)=>v.replace(/\s/g,'')==='-4', explic:"8 ‚àí 12 = ‚àí4."},
      {enunciado:"Ordena de menor a mayor: ‚àí2, 3, ‚àí5, 0 (escribe as√≠: -5,-2,0,3).", tipo:"texto",
       resp:"-5,-2,0,3", valid:(v)=>normList(v)==="-5,-2,0,3",
       explic:"En la recta: ‚àí5 < ‚àí2 < 0 < 3."}
    ]
  },
  {
    id:"fracciones", titulo:"Fracciones",
    exp:"a/b representa partes iguales de un todo (b‚â†0). Simplificar es dividir numerador y denominador por el mismo n√∫mero.",
    ejemplo:"8/12 simplifica a 2/3 (dividiendo por 4).",
    preguntas:[
      {enunciado:"¬øCu√°l es mayor: 3/4 o 2/3? (responde 3/4 o 2/3)", tipo:"texto",
       resp:"3/4", valid:(v)=>v.replace(/\s/g,'')==='3/4', explic:"3/4=0,75 y 2/3‚âà0,666‚Ä¶"},
      {enunciado:"1/6 + 1/3 = ? (responde fracci√≥n simplificada)", tipo:"texto",
       resp:"1/2", valid:(v)=>v.replace(/\s/g,'')==='1/2', explic:"m.c.m. 6 ‚Üí 1/6 + 2/6 = 3/6 = 1/2."},
      {enunciado:"Convierte 0,25 a fracci√≥n simplificada.", tipo:"texto",
       resp:"1/4", valid:(v)=>v.replace(/\s/g,'')==='1/4', explic:"0,25 = 25/100 = 1/4."}
    ]
  },
  {
    id:"ecuaciones", titulo:"Ecuaciones (1er grado)",
    exp:"Resolver es dejar sola la inc√≥gnita aplicando operaciones inversas en ambos lados.",
    ejemplo:"x + 7 = 15 ‚Üí x = 15 ‚àí 7 = 8.",
    preguntas:[
      {enunciado:"3x = 24 ‚Üí x = ?", tipo:"num", resp:8, explic:"x = 24/3 = 8."},
      {enunciado:"x ‚àí 9 = ‚àí2 ‚Üí x = ?", tipo:"num", resp:7, explic:"x = ‚àí2 + 9 = 7."},
      {enunciado:"2x + 4 = 18 ‚Üí x = ?", tipo:"num", resp:7, explic:"2x = 14 ‚Üí x = 7."}
    ]
  },
  {
    id:"proporcionalidad", titulo:"Proporcionalidad",
    exp:"Si al multiplicar una magnitud la otra se multiplica igual, son directamente proporcionales (regla de 3).",
    ejemplo:"3 cuadernos $1500 ‚Üí unidad $500 ‚Üí 5 cuadernos $2500.",
    preguntas:[
      {enunciado:"Si 4 kg cuestan $3600, 7 kg cuestan $‚Ä¶", tipo:"num", resp:6300, explic:"3600/4=900 por kg; 900√ó7=6300."},
      {enunciado:"Tabla directa: x: 2‚Üí5; y: 10‚Üí ? (proporcional)", tipo:"num", resp:25, explic:"Factor 2‚Üí5 es √ó2,5; 10√ó2,5=25."},
      {enunciado:"Escala 1 cm ‚Üí 5 km. ¬øCu√°ntos km son 7 cm?", tipo:"num", resp:35, explic:"7√ó5=35 km."}
    ]
  },
  {
    id:"geometria", titulo:"Geometr√≠a (planas)",
    exp:"Per√≠metro: suma de lados. √Åreas: Rect√°ngulo A= b√óh; Tri√°ngulo A=(b√óh)/2; C√≠rculo A=œÄr¬≤, P=2œÄr.",
    ejemplo:"Rect√°ngulo 8√ó5 ‚Üí A=40 cm¬≤; P=26 cm.",
    preguntas:[
      {enunciado:"Tri√°ngulo b=10, h=6. √Årea = ?", tipo:"num", resp:30, explic:"(10√ó6)/2 = 30 cm¬≤."},
      {enunciado:"C√≠rculo r=3, usa œÄ‚âà3,14. √Årea ‚âà ?", tipo:"texto", resp:"28.26", valid:(v)=>near(v,28.26,0.2),
       explic:"œÄr¬≤ ‚âà 3,14√ó9 = 28,26."},
      {enunciado:"Cuadrado lado 7. Per√≠metro = ?", tipo:"num", resp:28, explic:"4√ó7 = 28 cm."}
    ]
  }
];

function normList(v){
  return v.split(/[,\s]+/).filter(x=>x).map(x=>x.replace(/\s/g,'')).join(',').replace(/,+$/,'');
}
function near(v, target, tol){
  const x = parseFloat(String(v).replace(',', '.'));
  return isFinite(x) && Math.abs(x - target) <= tol;
}
function renderMenu(){
  const m = document.getElementById('menu');
  m.innerHTML = '';
  temas.forEach(t=>{
    const b = document.createElement('button');
    b.className='btn';
    b.textContent = t.titulo;
    b.onclick = ()=>renderTema(t.id);
    m.appendChild(b);
  });
  
}
function renderTema(id){
  const t = temas.find(x=>x.id===id);
  const c = document.getElementById('contenido');
  c.innerHTML = `
    <div class="card">
      <h3>${t.titulo}</h3>
      <div class="msg">${t.exp}</div>
      <div class="msg"><b>Ejemplo:</b> ${t.ejemplo}</div>
      <div id="qs"></div>
      <div class="chips">
        <button class="btn primary" onclick="volverMenu()">Volver al Men√∫</button>
        <button class="btn" onclick="renderTema('${t.id}')">Practicar m√°s</button>
        <button class="btn" onclick="siguiente('${t.id}')">Siguiente tema</button>
      </div>
    </div>
  `;
  renderPreguntas(t.preguntas);
  window.scrollTo({top:0,behavior:'smooth'});
}
function renderPreguntas(pregs){
  const cont = document.getElementById('qs');
  cont.innerHTML = '';
  pregs.forEach((q,i)=>{
    const div = document.createElement('div');
    div.className='q';
    const input = q.tipo==='num'
      ? `<input type="number" id="inp_${i}" />`
      : `<input type="text" id="inp_${i}" placeholder="Respuesta" />`;
    div.innerHTML = `
      <div>${i+1}) ${q.enunciado}</div>
      <div style="margin:6px 0">${input}
        <button class="btn" onclick="check(${i})">Comprobar</button>
      </div>
      <div id="fb_${i}"></div>
    `;
    cont.appendChild(div);
  });
  window.currentPregs = pregs;
}
function check(i){
  const q = window.currentPregs[i];
  const v = document.getElementById('inp_'+i).value.trim();
  let ok=false;
  if(q.valid){ ok = q.valid(v); }
  else if(q.tipo==='num'){ ok = Number(v)==q.resp; }
  else { ok = v.replace(/\s/g,'').toLowerCase()===String(q.resp).replace(/\s/g,'').toLowerCase(); }
  const fb = document.getElementById('fb_'+i);
  fb.innerHTML = ok
    ? `<div class="ok">¬°Correcto! ‚úÖ</div>`
    : `<div class="err">No es correcto. ${q.explic}</div>`;
}
function siguiente(id){
  const idx = temas.findIndex(t=>t.id===id);
  const next = temas[(idx+1)%temas.length].id;
  renderTema(next);
}
function volverMenu(){
  document.getElementById('contenido').innerHTML='';
  window.scrollTo({top:0,behavior:'smooth'});
}
function ayuda(){
  const c = document.getElementById('contenido');
  c.innerHTML = `
    <div class="card">
      <h3>Ayuda</h3>
      <div class="msg">Escribe solo n√∫meros cuando se pida. En fracciones usa a/b. Pulsa ‚ÄúVolver al Men√∫‚Äù para cambiar de tema.</div>
      <div class="chips">
        <a class="btn ghost" target="_blank" href="https://wa.me/543874122849?text=Hola+necesito+ayuda">Hablar con docente</a>
        <button class="btn primary" onclick="volverMenu()">Volver al Men√∫</button>
      </div>
    </div>`;
  window.scrollTo({top:0,behavior:'smooth'});
}
function miniQuiz(){
  const preguntas = [
    {e:"Suma: ‚àí4 + 9 = ?", tipo:"num", r:5, x:"‚àí4 + 9 = 5."},
    {e:"M√∫ltiplos de 6 hasta 24 (escribe: 6,12,18,24).", tipo:"texto", r:"6,12,18,24", v:(v)=>normList(v)==="6,12,18,24", x:"6,12,18,24."},
    {e:"2/5 + 1/10 = ? (fracci√≥n simplificada)", tipo:"texto", r:"1/2", v:(v)=>v.replace(/\s/g,'')==='1/2', x:"4/10+1/10=5/10=1/2."},
    {e:"x en 5x ‚àí 10 = 15", tipo:"num", r:5, x:"5x=25 ‚Üí x=5."},
    {e:"√Årea de rect√°ngulo 9√ó4", tipo:"num", r:36, x:"9√ó4=36."}
  ];
  let aciertos=0;
  const c = document.getElementById('contenido');
  c.innerHTML = `<div class="card"><h3>Mini‚ÄëQuiz (5)</h3><div id="quiz"></div></div>`;
  const qz = document.getElementById('quiz');
  preguntas.forEach((q,i)=>{
    const inp = q.tipo==='num'?`<input type="number" id="mq_${i}">`:`<input type="text" id="mq_${i}">`;
    const div = document.createElement('div');
    div.className='q';
    div.innerHTML = `<div>${i+1}) ${q.e}</div><div>${inp} <button class="btn" onclick="mqCheck(${i})">Comprobar</button></div><div id="mqfb_${i}"></div>`;
    qz.appendChild(div);
  });
  window.mq = {preguntas, aciertos};
  const fin = document.createElement('div');
  fin.style.marginTop='10px';
  fin.innerHTML = `<button class="btn primary" onclick="mqFin()">Finalizar quiz</button> <button class="btn" onclick="volverMenu()">Volver al Men√∫</button>`;
  qz.appendChild(fin);
}
function mqCheck(i){
  const q = window.mq.preguntas[i];
  const v = document.getElementById('mq_'+i).value.trim();
  let ok=false;
  if(q.v){ ok = q.v(v); }
  else if(q.tipo==='num'){ ok = Number(v)==q.r; }
  else { ok = v.replace(/\s/g,'')===String(q.r); }
  if(ok) window.mq.aciertos++;
  document.getElementById('mqfb_'+i).innerHTML = ok ? `<span class="ok">¬°Correcto!</span>` : `<span class="err">Incorrecto.</span> <span>${q.x}</span>`;
}
function mqFin(){
  const n = window.mq.aciertos;
  const c = document.getElementById('contenido');
  c.innerHTML = `<div class="card"><h3>Resultado</h3><div class="msg">Tu puntaje: <b>${n}/5</b>.</div><p>${n>=4?'¬°Excelente! Sigue as√≠.':'¬°Buen intento! Puedes repasar y volver a intentarlo.'}</p><div class="chips"><button class="btn" onclick="miniQuiz()">Repetir quiz</button><button class="btn primary" onclick="volverMenu()">Volver al Men√∫</button></div></div>`;
}
renderMenu();
</script>
</body>
</html>
